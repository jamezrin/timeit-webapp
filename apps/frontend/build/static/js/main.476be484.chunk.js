(this["webpackJsonp@timeit/frontend"]=this["webpackJsonp@timeit/frontend"]||[]).push([[0],{33:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),n=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),n(a(594),t)},594:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COULD_NOT_SEND_EMAIL_ERROR=t.ALREADY_REQUESTED_MAIL_TOKEN_ERROR=t.EXPIRED_MAIL_TOKEN_ERROR=t.INCORRECT_MAIL_TOKEN_ERROR=t.MAIL_TOKEN_NOT_FOUND_ERROR=t.ALREADY_PROJECT_MEMBER_ERROR=t.ACCOUNT_ALREADY_EXISTS_ERROR=t.INSUFFICIENT_PRIVILEGES_ERROR=t.ACCOUNT_NOT_FOUND_ERROR=t.SESSION_ENDED_ERROR=t.RESOURCE_NOT_FOUND_ERROR=t.UNKNOWN_SERVER_ERROR=t.NO_ACCESS_TOKEN_ERROR=t.INACTIVE_TOKEN_ERROR=t.INVALID_CREDENTIALS_ERROR=t.DISABLED_ACCOUNT_ERROR=t.INACTIVE_ACCOUNT_ERROR=t.INVALID_TOKEN_ERROR=void 0,t.INVALID_TOKEN_ERROR="INVALID_TOKEN",t.INACTIVE_ACCOUNT_ERROR="INACTIVE_ACCOUNT",t.DISABLED_ACCOUNT_ERROR="DISABLED_ACCOUNT",t.INVALID_CREDENTIALS_ERROR="INVALID_CREDENTIALS",t.INACTIVE_TOKEN_ERROR="INACTIVE_TOKEN",t.NO_ACCESS_TOKEN_ERROR="NO_ACCESS_TOKEN",t.UNKNOWN_SERVER_ERROR="UNKNOWN_SERVER",t.RESOURCE_NOT_FOUND_ERROR="RESOURCE_NOT_FOUND",t.SESSION_ENDED_ERROR="SESSION_ENDED",t.ACCOUNT_NOT_FOUND_ERROR="ACCOUNT_NOT_FOUND",t.INSUFFICIENT_PRIVILEGES_ERROR="INSUFFICIENT_PRIVILEGES",t.ACCOUNT_ALREADY_EXISTS_ERROR="ACCOUNT_ALREADY_EXISTS",t.ALREADY_PROJECT_MEMBER_ERROR="ALREADY_PROJECT_MEMBER",t.MAIL_TOKEN_NOT_FOUND_ERROR="MAIL_TOKEN_NOT_FOUND",t.INCORRECT_MAIL_TOKEN_ERROR="INCORRECT_MAIL_TOKEN",t.EXPIRED_MAIL_TOKEN_ERROR="EXPIRED_MAIL_TOKEN",t.ALREADY_REQUESTED_MAIL_TOKEN_ERROR="ALREADY_REQUESTED_MAIL_TOKEN",t.COULD_NOT_SEND_EMAIL_ERROR="COULD_NOT_SEND_EMAIL"},672:function(e,t){},756:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(44),s=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(56),i=a(55),d=a(25),u=a(825),l=a(800),j=a(823),b=a(5),m=a(49),O=a.n(m),h="https://timeit.jamezrin.name/api",p=h+"/project_members",x=h+"/data_query/summary_statistics",f=h+"/projects";function g(e,t){return O.a.patch("".concat(f,"/").concat(e),{name:t},{withCredentials:!0})}function v(e,t){return O.a.post("".concat(f,"/").concat(e,"/invite"),{emailAddress:t},{withCredentials:!0})}function R(e){return O.a.get("".concat(f,"/").concat(e,"/members"),{withCredentials:!0})}function E(e){return O.a.get("".concat(f,"/").concat(e),{withCredentials:!0})}function y(e){return O.a.get("".concat("https://timeit.jamezrin.name/api/sessions","/").concat(e),{withCredentials:!0})}function C(e,t){return O.a.post("".concat("https://timeit.jamezrin.name/api/perform-password-reset","/").concat(t),e,{withCredentials:!0})}function _(e){return O.a.post("https://timeit.jamezrin.name/api/request-password-reset",e,{withCredentials:!0})}function S(e){return O.a.post("https://timeit.jamezrin.name/api/create-account",e,{withCredentials:!0})}function I(e){return O.a.post("https://timeit.jamezrin.name/api/authenticate",e,{withCredentials:!0})}var w=a(2),N=function(){return O.a.get("https://timeit.jamezrin.name/api/current-user",{withCredentials:!0}).then((function(e){return{currentUser:e.data,isAuthenticated:!0,authenticationError:null}})).catch((function(e){return{currentUser:null,isAuthenticated:!1,authenticationError:e}}))},D=n.a.createContext(null),A=function(e){var t=e.children,a=Object(r.useState)(null),n=Object(b.a)(a,2),c=n[0],s=n[1],o=Object(r.useCallback)((function(){return N().then((function(e){return s(e),e}))}),[]);return Object(r.useEffect)((function(){o().then((function(e){console.log("User authentication status:",e)}))}),[o]),Object(w.jsx)(D.Provider,{value:{authStatus:c,refreshStatus:o,setAuthStatus:s},children:t})},T=D,k=a(23),M=a(218),L=["component"];function z(e){var t=e.component,a=Object(M.a)(e,L),n=Object(r.useContext)(T).authStatus;return Object(w.jsx)(i.b,Object(k.a)(Object(k.a)({},a),{},{render:function(e){return n.isAuthenticated?Object(w.jsx)(t,Object(k.a)({},e)):Object(w.jsx)(i.a,{to:{pathname:"/login",state:{previousLocation:e.location}}})}}))}var U=["component"];function V(e){var t=e.component,a=Object(M.a)(e,U),n=Object(r.useContext)(T).authStatus;return Object(w.jsx)(i.b,Object(k.a)(Object(k.a)({},a),{},{render:function(e){return n.isAuthenticated?Object(w.jsx)(i.a,{to:{pathname:e.location.from||"/"}}):Object(w.jsx)(t,Object(k.a)({},e))}}))}var P=a(12),K=a.n(P),H=a(38),F=a(61),B=a(801),q=a(828),Y=a(802),W=a(462),X=a(783),G=a.p+"static/media/time_management.1a99033f.svg",J=a.p+"static/media/brand-logo.0a4000e8.svg",Q=a(22),$=a.n(Q),Z={userSelect:"none",userDrag:"none",pointerEvents:"none"},ee=function(e){return"admin"===e.role||"manager"===e.role},te=function(e){return $()(e).format("HH:mm:ss DD/MM/YYYY")},ae=function(e,t){return e.find((function(e){return e.id===t}))},re=function(e){return"".concat(e.firstName," ").concat(e.lastName)},ne=function(e){return"".concat(e," - TimeIt")},ce=function(e,t){var a,r,n,c=null===e||void 0===e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||null===(n=r.error)||void 0===n?void 0:n.type;return c&&c===t};function se(e){var t=e.children,a=Object(X.d)({base:"gray.100",lg:"transparent"},"gray.900"),r=Object(X.d)("gray.100","gray.900"),n=Object(X.d)({base:"white",lg:"gray.200"},"gray.800");return Object(w.jsxs)(l.a,{height:"100vh",direction:{base:"column",lg:"row"},children:[Object(w.jsx)(B.a,{bg:r,width:{base:"100%",lg:.6},pb:10,children:Object(w.jsxs)(l.a,{height:"100%",direction:"column",justifyContent:"center",alignItems:"center",children:[Object(w.jsx)(B.a,{py:{base:4,lg:0},bg:a,width:"100%",children:Object(w.jsx)(q.a,{m:"auto",maxWidth:"15rem",src:J,alt:"",css:Object(k.a)({},Z)})}),Object(w.jsx)(q.a,{maxWidth:"24rem",src:G,display:{base:"none",lg:"block"},alt:"",px:10,css:Object(k.a)({},Z)}),Object(w.jsx)(B.a,{mt:8,px:4,maxWidth:{base:"auto",lg:"36rem"},children:Object(w.jsx)(Y.a,{textAlign:"justify",children:"Bienvenido/a a TimeIt, una plataforma de c\xf3digo abierto y libre para controlar tu tiempo. Podr\xe1s crear proyectos con multiples usuarios y utilizar tu cliente de escritorio para ver que aplicaciones est\xe1s usando y durante cuanto tiempo. Con un dise\xf1o minimalista y usando las tecnolog\xedas mas modernas para dar una buena experiencia de usuario."})}),Object(w.jsx)(B.a,{as:"a",mt:5,href:"https://github.com/jamezrin/timeit-client",target:"_blank",children:Object(w.jsx)(W.a,{colorScheme:"blue",children:"Cliente de escritorio"})})]})}),Object(w.jsx)(B.a,{bg:n,width:{base:"100%",lg:.4},px:4,py:10,children:t})]})}var oe=a(803),ie=a(804),de=a(805),ue=a(115),le=a(807),je=a(830),be=a(808),me=a(809),Oe=a(810);function he(e){var t=Object(r.useRef)(document.title);return Object(r.useEffect)((function(){document.title=e}),[e]),function(){document.title=t.current}}var pe=a(41),xe=a(68),fe=a(811),ge=a(33),ve=pe.a().shape({emailAddress:pe.b().email().required(),password:pe.b().required().trim().min(8)});function Re(){var e=Object(F.b)({resolver:Object(xe.a)(ve)}),t=e.handleSubmit,a=e.errors,n=e.register,c=e.formState,s=Object(X.d)("white","gray.600"),u=Object(r.useState)(!1),l=Object(b.a)(u,2),j=l[0],m=l[1],O=Object(d.useToasts)().addToast,h=Object(i.h)(),p=Object(i.g)(),x=Object(r.useContext)(T).setAuthStatus;function f(){return(f=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t);case 3:N().then((function(e){x(e),O("Has iniciado sesi\xf3n correctamente",{appearance:"success",autoDismiss:!0}),p.replace(h.state&&h.state.previousLocation||"/")})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),ce(e.t0,ge.INVALID_CREDENTIALS_ERROR)?O("Las credenciales introducidas no son v\xe1lidas",{appearance:"error",autoDismiss:!0}):ce(e.t0,ge.INACTIVE_ACCOUNT_ERROR)?O("Todav\xeda no has confirmado tu cuenta de usuario, comprueba tu correo electr\xf3nico",{appearance:"error",autoDismiss:!0}):O("Ha ocurrido un error desconocido: ".concat(e.t0),{appearance:"error",autoDismiss:!0});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return he(ne("Inicio de sesi\xf3n")),Object(w.jsxs)(se,{children:[Object(w.jsx)(oe.a,{as:"h1",children:"Inicia sesi\xf3n"}),Object(w.jsxs)(ie.a,{mt:4,children:[Object(w.jsxs)(ie.b,{children:["Si no tienes una cuenta,\xa0",Object(w.jsx)(de.a,{as:o.b,to:"/register",color:"blue.500",children:"crea una nueva cuenta"})]}),Object(w.jsxs)(ie.b,{children:["Si no te acuerdas de tu contrase\xf1a,\xa0",Object(w.jsx)(de.a,{as:o.b,to:"/recover_password",color:"blue.500",children:"recupera tu contrase\xf1a"})]})]}),Object(w.jsxs)("form",{onSubmit:t((function(e){return f.apply(this,arguments)})),children:[Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.emailAddress,children:[Object(w.jsx)(le.a,{htmlFor:"emailAddress",children:"Correo electr\xf3nico"}),Object(w.jsx)(je.a,{name:"emailAddress",id:"emailAddress",type:"text",placeholder:"usuario@ejemplo.org",ref:n,errorBorderColor:"red.500",bg:s}),Object(w.jsx)(be.a,{children:a.emailAddress&&a.emailAddress.message})]}),Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.password,children:[Object(w.jsx)(le.a,{htmlFor:"password",children:"Contrase\xf1a"}),Object(w.jsxs)(me.a,{size:"md",children:[Object(w.jsx)(je.a,{name:"password",id:"password",type:j?"text":"password",placeholder:"$tr0ng p@ssw0rd",ref:n,errorBorderColor:"red.500",bg:s}),Object(w.jsx)(Oe.a,{width:"6.5rem",mr:{base:4,lg:12},children:Object(w.jsx)(W.a,{h:"1.75rem",size:"sm",onClick:function(){return m(!j)},children:j?"Ocultar":"Mostrar"})})]}),Object(w.jsx)(be.a,{children:a.password&&a.password.message})]}),Object(w.jsxs)(W.a,{mt:4,colorScheme:"blue",isLoading:c.isSubmitting,type:"submit",children:["Continuar ",Object(w.jsx)(fe.a,{ml:4})]})]})]})}var Ee=a(813),ye=a(463),Ce=a(812),_e=a(814),Se=a(815),Ie=function(e){return Object(w.jsx)(Y.a,Object(k.a)(Object(k.a)({mt:{base:4,md:0},mr:6,display:"block"},e),{},{children:e.children}))};function we(e){var t=Object(r.useState)(!1),a=Object(b.a)(t,2),n=a[0],c=a[1],s=Object(X.c)(),o=s.colorMode,i=s.toggleColorMode,u=Object(r.useContext)(T).refreshStatus,j=Object(d.useToasts)().addToast,m=Object(X.d)("white","gray.800");return Object(w.jsxs)(l.a,Object(k.a)(Object(k.a)({as:"nav",align:"center",justify:"space-between",wrap:"wrap",padding:"1rem",bg:m,color:"blue.500",shadow:"md",position:"sticky",top:"0"},e),{},{zIndex:"100",children:[Object(w.jsx)(l.a,{align:"center",mr:5,children:Object(w.jsx)(oe.a,{as:"h1",fontSize:"24px",children:"TimeIt"})}),Object(w.jsx)(B.a,{display:{base:"block",md:"none"},onClick:function(){return c(!n)},children:Object(w.jsxs)("svg",{fill:"dark"===o?"#fff":"#000",width:"12px",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[Object(w.jsx)("title",{children:"Menu"}),Object(w.jsx)("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})]})}),Object(w.jsx)(B.a,{display:{base:n?"block":"none",md:"flex"},width:{base:"full",md:"auto"},alignItems:"center",flexGrow:1,children:Object(w.jsx)(Ie,{ml:"auto",mr:"8",children:Object(w.jsx)(B.a,{as:"a",href:"https://github.com/jamezrin/timeit-client",target:"_blank",children:Object(w.jsx)(W.a,{colorScheme:"blue",size:"sm",variant:"outline",leftIcon:Object(w.jsx)(Ce.a,{}),children:"Descargar Cliente"})})})}),Object(w.jsxs)(B.a,{display:{base:n?"block":"none",md:"block"},mt:{base:4,md:0},children:[Object(w.jsx)(Ee.a,{"aria-label":"Cambiar modo de color",variant:"ghost",icon:"dark"===o?Object(w.jsx)(_e.a,{}):Object(w.jsx)(Se.a,{}),onClick:i,mx:1}),Object(w.jsx)(Ee.a,{"aria-label":"Cerrar sesi\xf3n",variant:"ghost",icon:Object(w.jsx)(ye.a,{}),fontSize:"24px",onClick:function(){O.a.post("https://timeit.jamezrin.name/api/deauthenticate",{},{withCredentials:!0}).then((function(){j("Has cerrado tu sesi\xf3n correctamente",{appearance:"info",autoDismiss:!0}),u()}))},mx:1})]})]}))}var Ne=function(e){var t=e.children;return Object(w.jsxs)(l.a,{height:"100vh",direction:"column",children:[Object(w.jsx)(we,{}),Object(w.jsx)(l.a,{direction:"column",maxWidth:{base:"100%",lg:"100rem"},marginX:"auto",width:"100%",height:"100%",children:t})]})},De=a(829),Ae=function(e){var t=e.message,a=void 0===t?"Cargando la aplicaci\xf3n":t;return Object(w.jsxs)(l.a,{flexGrow:1,justifyContent:"center",alignItems:"center",direction:"column",children:[Object(w.jsx)(De.a,{thickness:"4px",speed:"0.65s",emptyColor:"gray.200",color:"blue.500",size:"xl"}),Object(w.jsx)(Y.a,{mt:4,children:a})]})},Te=a.p+"static/media/work_time.c2afe3f4.svg",ke=a(824),Me=a(827),Le=n.a.createContext(null),ze=pe.a().shape({projectName:pe.b().required().trim().min(4)});function Ue(e){var t=e.isOpen,a=e.onClose,r=e.onSubmit,n=Object(F.b)({resolver:Object(xe.a)(ze)}),c=n.handleSubmit,s=n.errors,o=n.register,i=n.formState,d=Object(X.d)("white","gray.600");return Object(w.jsxs)(ke.a,{blockScrollOnMount:!1,isOpen:t,onClose:a,children:[Object(w.jsx)(ke.g,{zIndex:"1000"}),Object(w.jsxs)(ke.d,{children:[Object(w.jsx)(ke.f,{children:"Crear un proyecto"}),Object(w.jsx)(ke.c,{}),Object(w.jsxs)("form",{onSubmit:c(r),children:[Object(w.jsx)(ke.b,{children:Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!s.projectName,children:[Object(w.jsx)(le.a,{htmlFor:"projectName",children:"Nombre del proyecto"}),Object(w.jsx)(je.a,{name:"projectName",id:"projectName",type:"text",placeholder:"Mi super proyecto",ref:o,errorBorderColor:"red.500",bg:d}),Object(w.jsx)(be.a,{children:s.projectName&&s.projectName.message})]})}),Object(w.jsx)(ke.e,{children:Object(w.jsxs)(W.a,{colorScheme:"blue",isLoading:i.isSubmitting,type:"submit",children:["Crear proyecto ",Object(w.jsx)(fe.a,{ml:4})]})})]})]})]})}function Ve(e){var t=e.children,a=Object(Me.a)(),n=a.isOpen,c=a.onOpen,s=a.onClose,o=Object(r.useState)(0),i=Object(b.a)(o,2),u=i[0],l=i[1],j=Object(d.useToasts)().addToast,m=function(){var e=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a={name:t.projectName},O.a.post(f,a,{withCredentials:!0});case 2:j("Has creado un nuevo proyecto llamado ".concat(t.projectName),{appearance:"success",autoDismiss:!0}),l(u+1),n&&s();case 5:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(Le.Provider,{value:{openProjectCreationModal:c,closeProjectCreationModal:s,isProjectCreationModalOpen:n,projectsCreatedCount:u},children:[Object(w.jsx)(Ue,{isOpen:n,onClose:s,onSubmit:m}),t]})}function Pe(){var e=Object(r.useContext)(Le).openProjectCreationModal;return Object(w.jsxs)(l.a,{height:"100%",width:"100%",alignItems:"center",justifyContent:"center",textAlign:"center",direction:"column",children:[Object(w.jsx)(q.a,{src:Te,css:Object(k.a)({},Z),width:"20rem"}),Object(w.jsx)(oe.a,{as:"h1",size:"lg",color:"blue.500",mt:8,children:"Todav\xeda no eres miembro de un proyecto"}),Object(w.jsx)(oe.a,{as:"h2",size:"md",color:"blue.500",mt:2,children:"\xa1Crea uno o haz que te inviten!"}),Object(w.jsx)(W.a,{onClick:e,colorScheme:"blue",mt:4,children:"Crear un proyecto"})]})}function Ke(e){var t=e.projects,a=Object(r.useContext)(Le).openProjectCreationModal,n=Object(X.d)("gray.100","gray.900");return Object(w.jsxs)(B.a,{py:10,mx:8,children:[Object(w.jsxs)(l.a,{children:[Object(w.jsx)(oe.a,{as:"h1",children:"Tus proyectos"}),Object(w.jsx)(W.a,{onClick:a,colorScheme:"blue",ml:"auto",children:"Crear un proyecto"})]}),Object(w.jsx)(ie.a,{mt:12,children:t.map((function(e){return Object(w.jsx)(ie.b,{children:Object(w.jsx)(o.b,{to:"/project/".concat(e.id),children:Object(w.jsx)(B.a,{bg:n,shadow:"md",p:6,mb:4,_hover:{transform:"scale(1.03)"},children:e.name||"Proyecto sin nombre"})})},e.id)}))})]})}function He(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(Le).projectsCreatedCount;return he(ne("Lista de proyectos")),Object(r.useEffect)((function(){O.a.get(f,{withCredentials:!0}).then((function(e){n(e.data)}))}),[c]),Object(w.jsx)(Ne,{children:a?a.length>0?Object(w.jsx)(Ke,{projects:a}):Object(w.jsx)(Pe,{}):Object(w.jsx)(Ae,{message:"Cargando los proyectos"})})}var Fe=function(){return Object(w.jsx)(Ve,{children:Object(w.jsx)(He,{})})},Be=pe.a().shape({emailAddress:pe.b().email().required(),password:pe.b().required().trim().min(8),firstName:pe.b().trim().required(),lastName:pe.b().trim().required()});function qe(){var e=Object(F.b)({resolver:Object(xe.a)(Be)}),t=e.handleSubmit,a=e.errors,n=e.register,c=e.formState,s=Object(X.d)("white","gray.600"),u=Object(i.g)(),l=Object(d.useToasts)().addToast;function j(){return(j=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(t);case 3:l("Te has registrado correctamente, verifica tu cuenta para poder iniciar sesi\xf3n",{appearance:"success",autoDismiss:!0,autoDismissTimeout:1e4}),u.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ce(e.t0,ge.ACCOUNT_ALREADY_EXISTS_ERROR)?l("Ya existe una cuenta con ese correo electronico",{appearance:"error",autoDismiss:!0}):l("Ha ocurrido un error desconocido: ".concat(e.t0),{appearance:"error",autoDismiss:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}he(ne("Creaci\xf3n de cuenta"));var m=Object(r.useState)(!1),O=Object(b.a)(m,2),h=O[0],p=O[1];return Object(w.jsxs)(se,{children:[Object(w.jsx)(oe.a,{as:"h1",children:"Crea una cuenta"}),Object(w.jsxs)(Y.a,{mt:4,children:["O si ya tienes una cuenta,\xa0",Object(w.jsx)(de.a,{as:o.b,to:"/login",color:"blue.500",children:"inicia sesi\xf3n"})]}),Object(w.jsxs)("form",{onSubmit:t((function(e){return j.apply(this,arguments)})),children:[Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.emailAddress,children:[Object(w.jsx)(le.a,{htmlFor:"emailAddress",children:"Correo electr\xf3nico"}),Object(w.jsx)(je.a,{name:"emailAddress",id:"emailAddress",type:"email",placeholder:"usuario@ejemplo.org",ref:n,errorBorderColor:"red.500",bg:s}),Object(w.jsx)(be.a,{children:a.emailAddress&&a.emailAddress.message})]}),Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.firstName,children:[Object(w.jsx)(le.a,{htmlFor:"firstName",children:"Nombre"}),Object(w.jsx)(je.a,{name:"firstName",id:"firstName",placeholder:"John",ref:n,errorBorderColor:"red.500",bg:s}),Object(w.jsx)(be.a,{children:a.firstName&&a.firstName.message})]}),Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.lastName,children:[Object(w.jsx)(le.a,{htmlFor:"lastName",children:"Apellidos"}),Object(w.jsx)(je.a,{name:"lastName",id:"lastName",placeholder:"Smith",ref:n,errorBorderColor:"red.500",bg:s}),Object(w.jsx)(be.a,{children:a.lastName&&a.lastName.message})]}),Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.password,children:[Object(w.jsx)(le.a,{htmlFor:"password",children:"Contrase\xf1a"}),Object(w.jsxs)(me.a,{size:"md",children:[Object(w.jsx)(je.a,{name:"password",id:"password",type:h?"text":"password",placeholder:"$tr0ng p@ssw0rd",ref:n,errorBorderColor:"red.500",bg:s}),Object(w.jsx)(Oe.a,{width:"6.5rem",mr:{base:4,lg:12},children:Object(w.jsx)(W.a,{h:"1.75rem",size:"sm",onClick:function(){return p(!h)},children:h?"Ocultar":"Mostrar"})})]}),Object(w.jsx)(be.a,{children:a.password&&a.password.message})]}),Object(w.jsxs)(W.a,{mt:4,colorScheme:"blue",isLoading:c.isSubmitting,type:"submit",children:["Continuar ",Object(w.jsx)(fe.a,{ml:4})]})]})]})}var Ye=a(817),We=a(818),Xe=a(87),Ge=a(460);var Je=function(e){var t=e.projectInfo,a=e.projectMembers,n=e.onSelectedMemberChange,c=Object(X.c)().colorMode,s=Object(Xe.e)(),o=Object(r.useMemo)((function(){return a?a.filter((function(e){return e.id===t.projectMember.id||ee(t.projectMember)})).map((function(e){return{label:re(e.user),value:e.id}})):null}),[t,a]),i=Object(r.useMemo)((function(){return o?o.find((function(e){return e.value===t.projectMember.id})):null}),[o,t]),d=Object(r.useRef)(n).current;Object(r.useEffect)((function(){d(i?[i.value]:[])}),[d,i]);var u=Object(r.useCallback)((function(e){d(e?e.map((function(e){return e.value})):[])}),[d]),l=Object(r.useMemo)((function(){return{control:function(e){return"dark"!==c?e:Object(k.a)(Object(k.a)({},e),{},{backgroundColor:s.colors.gray[900],borderColor:s.colors.gray[700],":hover":Object(k.a)(Object(k.a)({},e[":hover"]),{},{borderColor:s.colors.gray[900]})})},menu:function(e,t){return"dark"!==c?e:Object(k.a)(Object(k.a)({},e),{},{backgroundColor:s.colors.gray[900]})},option:function(e,t){t.data,t.isDisabled,t.isFocused,t.isSelected;return"dark"!==c?e:Object(k.a)(Object(k.a)({},e),{},{backgroundColor:s.colors.gray[900],":active":{backgroundColor:s.colors.gray[700]}})},multiValue:function(e,t){t.data;return"dark"!==c?e:Object(k.a)({},e)},multiValueLabel:function(e,t){t.data;return Object(k.a)(Object(k.a)({},e),{},{textOverflow:"ellipsis",maxWidth:"15ch"})},multiValueRemove:function(e,t){t.data,t.theme;return"dark"!==c?e:Object(k.a)(Object(k.a)({},e),{},{color:s.colors.gray[800]})}}}),[s,c]);return o&&Object(w.jsx)(Ge.a,{defaultValue:[i],options:o,onChange:u,styles:l,isMulti:!0})},Qe=a(440);a(660),a(711),a(712);function $e(e){var t=e.startDate,a=e.endDate,n=e.onDatesChange,c=Object(r.useState)(null),s=Object(b.a)(c,2),o=s[0],i=s[1];return Object(w.jsx)(Qe.DateRangePicker,{startDate:t,endDate:a,startDateId:"session_period_start_date",endDateId:"session_period_end_date",onDatesChange:n,isOutsideRange:function(){return!1},focusedInput:o,onFocusChange:i})}var Ze=function(e){var t=e.title,a=void 0===t?"Lorem ipsum dolor sit amet":t,r=e.sumValue,n=void 0===r?"???":r,c=e.avgValue,s=void 0===c?"??":c,o=e.minValue,i=void 0===o?"??":o,d=e.maxValue,u=void 0===d?"??":d;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(l.a,{direction:"row",children:[Object(w.jsx)(Y.a,{fontSize:"lg",lineHeight:1.35,children:a}),Object(w.jsxs)(B.a,{ml:"auto",pl:3,children:[Object(w.jsx)(Y.a,{lineHeight:1,textAlign:"center",fontSize:"2xl",children:n>60?Math.floor(n/60):n}),Object(w.jsx)(Y.a,{lineHeight:1,textAlign:"center",fontSize:"md",mt:0,children:n>60?"horas":"minutos"})]})]}),Object(w.jsx)(B.a,{mt:"auto",children:Object(w.jsxs)(Y.a,{fontSize:"xs",children:["M\xednimo"," ",i>60?"".concat(Math.floor(i/60)," horas"):"".concat(i," minutos"),", maximo"," ",u>60?"".concat(Math.floor(u/60)," horas"):"".concat(u," minutos"),", media"," ",s>60?"".concat(Math.floor(s/60)," horas"):"".concat(s," minutos")]})})]})},et=function(e){var t=e.title,a=void 0===t?"Lorem ipsum dolor sit amet":t,r=e.sumValue,n=void 0===r?"???":r,c=e.avgValue,s=void 0===c?"??":c,o=e.minValue,i=void 0===o?"??":o,d=e.maxValue,u=void 0===d?"??":d,j=Object(X.d)("gray.200","gray.700");return Object(w.jsx)(l.a,{p:4,mx:4,bg:j,mt:{base:"1.5rem",md:"0"},rounded:"md",shadow:"md",direction:"column",flexGrow:1,flexShrink:1,flexBasis:0,children:Object(w.jsx)(Ze,{title:a,sumValue:n,avgValue:s,minValue:i,maxValue:u})})};var tt,at=function(e){e.projectInfo;var t=e.projectStats;return Object(w.jsx)(w.Fragment,{children:t&&Object(w.jsxs)(l.a,{direction:{base:"column",md:"row"},mx:-4,justifyContent:"space-around",children:[Object(w.jsx)(et,{title:"Tiempo invertido en el periodo actual",sumValue:t.currentPeriodStatsMinuteSum,avgValue:t.currentPeriodStatsMinuteAvg,minValue:t.currentPeriodStatsMinuteMin,maxValue:t.currentPeriodStatsMinuteMax}),Object(w.jsx)(et,{title:"Tiempo invertido en el \xfaltimo dia del periodo",sumValue:t.lastDayStatsMinuteSum,avgValue:t.lastDayStatsMinuteAvg,minValue:t.lastDayStatsMinuteMin,maxValue:t.lastDayStatsMinuteMax}),Object(w.jsx)(et,{title:"Tiempo invertido en la \xfaltima semana del periodo",sumValue:t.lastWeekStatsMinuteSum,avgValue:t.lastWeekStatsMinuteAvg,minValue:t.lastWeekStatsMinuteMin,maxValue:t.lastWeekStatsMinuteMax}),Object(w.jsx)(et,{title:"Tiempo invertido en el \xfaltimo mes del periodo",sumValue:t.lastMonthStatsMinuteSum,avgValue:t.lastMonthStatsMinuteAvg,minValue:t.lastMonthStatsMinuteMin,maxValue:t.lastMonthStatsMinuteMax})]})})},rt=a(459),nt=function(e){var t=e.data,a=e.startDate,r=e.endDate;return Object(w.jsx)(rt.a,{data:t,margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"dias",legendOffset:36,legendPosition:"middle",format:function(e){var t=$()(a),n=$()(r).diff(t,"days"),c=$()(e);if(n<40)return c.format("DD/MM")}},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"horas",legendOffset:-40,legendPosition:"middle"},colors:{scheme:"paired"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})},ct=function(e){e.projectInfo;var t=e.projectMembers,a=e.projectHistoryStats,r=e.startDate,n=e.endDate;return Object(w.jsx)(X.b,{children:Object(w.jsx)(B.a,{height:"300px",width:"100%",children:a&&Object(w.jsx)(nt,{data:a.map((function(e){return{id:re(ae(t,e.memberId).user),data:e.data.map((function(e){return{x:$()(e.day).format("YYYY-MM-DD"),y:Math.round(e.minuteSum/60)}}))}})),startDate:r,endDate:n})})})},st=a(454),ot=a(47),it=(a(428),a(217)),dt=a(213),ut=it.a.div(tt||(tt=Object(st.a)(["\n  flex-grow: 1;\n\n  .BaseTable__row {\n    cursor: pointer;\n  }\n"])));var lt=function(e){var t=e.projectInfo,a=e.projectMembers,n=e.sessions,c=Object(i.g)(),s=Object(r.useMemo)((function(){return n?n.map((function(e){var t=ae(a,e.projectMemberId);return{id:e.id,keyCreationDate:te(e.createdAt),keyUpdateDate:te(e.updatedAt),keyUser:re(t.user),keyEndDate:e.endedAt?te(e.endedAt):"En curso"}})):[]}),[n,a]),o={onClick:function(e){c.push("/project/".concat(t.id,"/session/").concat(e.rowData.id))}},d=Object(dt.a)(),u=d.ref,l=d.width,j=void 0===l?0:l;return Object(w.jsx)(ut,{ref:u,children:Object(w.jsxs)(ot.c,{data:s,height:400,rowEventHandlers:o,width:j,children:[Object(w.jsx)(ot.b,{dataKey:"id",title:"Id",resizable:!0,width:100},"keyId"),Object(w.jsx)(ot.b,{dataKey:"keyCreationDate",title:"Creaci\xf3n",resizable:!0,width:200},"keyCreationDate"),Object(w.jsx)(ot.b,{dataKey:"keyUpdateDate",title:"Actualizaci\xf3n",resizable:!0,width:200},"keyUpdateDate"),Object(w.jsx)(ot.b,{dataKey:"keyEndDate",title:"Finalizaci\xf3n",resizable:!0,width:200},"keyEndDate"),Object(w.jsx)(ot.b,{dataKey:"keyUser",title:"Usuario",resizable:!1,width:300},"keyUser")]})})};function jt(e){var t=e.projectInfo,a=e.projectMembers,r=e.projectStats,n=e.projectHistoryStats,c=e.sessions,s=e.startDate,o=e.endDate;return Object(w.jsxs)(B.a,{children:[Object(w.jsxs)(B.a,{mt:8,children:[Object(w.jsx)(oe.a,{as:"h2",size:"lg",mb:3,children:"Estadisticas"}),Object(w.jsx)(at,{projectInfo:t,projectStats:r}),Object(w.jsx)(ct,{projectInfo:t,projectMembers:a,projectHistoryStats:n,startDate:s,enDate:o})]}),Object(w.jsxs)(B.a,{mt:8,children:[Object(w.jsxs)(oe.a,{as:"h2",size:"lg",mb:3,children:["Sesiones (",r?r.currentPeriodSessionCount:"Desconocido",")"]}),Object(w.jsx)(lt,{projectInfo:t,sessions:c,projectMembers:a})]})]})}var bt=a.p+"static/media/setup_analytics.57126581.svg";function mt(){return Object(w.jsxs)(l.a,{direction:"column",justifyContent:"center",alignItems:"center",maxWidth:"1200px",m:"auto",children:[Object(w.jsx)(q.a,{src:bt,maxWidth:"36rem",alt:"",mt:"8rem",css:Object(k.a)({},Z)}),Object(w.jsx)(oe.a,{as:"h2",mt:10,maxWidth:"50%",fontSize:"2xl",color:"blue.400",textAlign:"center",children:"Selecciona un miembro de tu grupo para ver estad\xedsticas y informaci\xf3n sobre las sesiones de trabajo realizadas dentro de este proyecto"})]})}function Ot(e){var t=e.projectInfo,a=e.projectMembers,n=Object(i.g)(),c=Object(r.useState)($()().set("date",1)),s=Object(b.a)(c,2),o=s[0],d=s[1],u=Object(r.useState)($()()),j=Object(b.a)(u,2),m=j[0],h=j[1],p=Object(r.useState)(null),g=Object(b.a)(p,2),v=g[0],R=g[1],E=Object(r.useState)(null),y=Object(b.a)(E,2),C=y[0],_=y[1],S=Object(r.useState)(null),I=Object(b.a)(S,2),N=I[0],D=I[1],A=Object(r.useState)(null),T=Object(b.a)(A,2),k=T[0],M=T[1];return Object(r.useEffect)((function(){k&&k.length>0&&o&&m?(function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return O.a.get("".concat(x,"/").concat(e),{withCredentials:!0,params:{memberIds:r,startDate:t,endDate:a}})}(t.id,o,m,k).then((function(e){R(e.data)})),function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return O.a.get("".concat(f,"/").concat(e,"/sessions"),{withCredentials:!0,params:{memberIds:r,startDate:t,endDate:a}})}(t.id,o,m,k).then((function(e){_(e.data)})),Promise.all(k.map((function(e){return function(e,t,a,r){return O.a.get("".concat("https://timeit.jamezrin.name/api/data_query/history_statistics","/").concat(e),{withCredentials:!0,params:{memberId:r,startDate:t,endDate:a}})}(t.id,o,m,e).then((function(t){return{memberId:e,data:t.data}}))}))).then((function(e){D(e)}))):(R(null),_(null))}),[t,k,o,m]),Object(w.jsxs)(B.a,{py:10,mx:8,children:[Object(w.jsxs)(l.a,{mb:12,children:[Object(w.jsx)(W.a,{leftIcon:Object(w.jsx)(Ye.a,{}),colorScheme:"gray",variant:"ghost",whiteSpace:"pre",onClick:function(){return n.push("/")},children:t.name}),ee(t.projectMember)&&Object(w.jsx)(W.a,{rightIcon:Object(w.jsx)(We.a,{}),colorScheme:"gray",variant:"ghost",ml:"auto",onClick:function(){return n.push("/project/".concat(t.id,"/settings"))},children:"Ajustes"})]}),Object(w.jsxs)(B.a,{mx:8,children:[Object(w.jsxs)(l.a,{direction:{base:"column",md:"row"},alignItems:{base:"start",md:"center"},children:[Object(w.jsx)(B.a,{minWidth:"20rem",maxWidth:"30rem",children:Object(w.jsx)(Je,{projectInfo:t,projectMembers:a,onSelectedMemberChange:function(e){M(e)}})}),Object(w.jsx)(B.a,{ml:{md:"auto"},mt:{base:"2rem",md:"0"},children:Object(w.jsx)($e,{startDate:o,endDate:m,projectInfo:t,onDatesChange:function(e){var t=e.startDate,a=e.endDate;d(t),h(a)}})})]}),k&&k.length>0?Object(w.jsx)(jt,{projectInfo:t,projectMembers:a,projectStats:v,projectHistoryStats:N,sessions:C,startDate:o,endDate:m}):Object(w.jsx)(mt,{})]})]})}$.a.locale("es");var ht=function(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),s=Object(b.a)(c,2),o=s[0],u=s[1],l=Object(i.i)().projectId,j=Object(d.useToasts)().addToast,m=Object(i.g)();return he(ne("Proyecto ".concat((null===a||void 0===a?void 0:a.name)||"Desconocido"))),Object(r.useEffect)((function(){Promise.all([E(l).then((function(e){n(e.data)})),R(l).then((function(e){u(e.data)}))]).catch((function(e){ce(e,ge.RESOURCE_NOT_FOUND_ERROR)?(j("No se ha podido encontrar el proyecto que has pedido",{appearance:"error",autoDismiss:!0}),m.push("/")):j("Ha ocurrido un error desconocido: ".concat(e),{appearance:"error",autoDismiss:!0})}))}),[m,j,l]),Object(w.jsx)(Ne,{children:a&&o?Object(w.jsx)(Ot,{projectInfo:a,projectMembers:o}):Object(w.jsx)(Ae,{message:"Cargando el proyecto actual"})})},pt=a(819),xt=pe.a().shape({projectName:pe.b().required().trim().min(4)});var ft=function(e){var t=e.projectInfo,a=e.setProjectInfo,r=Object(F.b)({resolver:Object(xe.a)(xt)}),n=r.handleSubmit,c=r.errors,s=r.reset,o=r.register,i=r.formState,u=Object(X.d)("white","gray.600"),l=Object(X.d)("gray.100","gray.700"),j=Object(d.useToasts)().addToast;function b(){return(b=Object(H.a)(K.a.mark((function e(r){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.projectName,e.prev=1,e.next=4,g(t.id,n);case 4:j('Has cambiado el nombre del proyecto a "'.concat(n,'"'),{appearance:"success",autoDismiss:!0}),a(Object(k.a)(Object(k.a)({},t),{},{name:n})),s(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j("Ha ocurrido un error desconocido: ".concat(e.t0),{appearance:"error",autoDismiss:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(w.jsxs)(B.a,{p:4,bg:l,rounded:"md",children:[Object(w.jsx)(oe.a,{as:"h2",size:"md",children:"Cambiar nombre de proyecto"}),Object(w.jsx)(pt.a,{my:2}),Object(w.jsx)(Y.a,{mt:4,children:"Aqu\xed puedes cambiar el nombre del proyecto."}),Object(w.jsx)("form",{onSubmit:n((function(e){return b.apply(this,arguments)})),children:Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!c.projectName,children:[Object(w.jsxs)(me.a,{mt:4,children:[Object(w.jsx)(je.a,{width:"auto",flexGrow:"1",name:"projectName",type:"text",placeholder:"Nombre de proyecto",ref:o,errorBorderColor:"red.500",bg:u}),Object(w.jsx)(W.a,{ml:6,colorScheme:"blue",isLoading:i.isSubmitting,type:"submit",children:"Cambiar nombre"})]}),Object(w.jsx)(be.a,{children:c.projectName&&c.projectName.message})]})})]})},gt=a(820),vt=a(821),Rt=a(822);var Et=function(e){var t=e.projectInfo,a=e.projectMembers,n=e.updateMembers,c=Object(X.d)("gray.100","gray.700"),s=Object(d.useToasts)().addToast,o=Object(r.useCallback)((function(e){var t;(t=e.id,O.a.post("".concat(p,"/").concat(t,"/promote"),{},{withCredentials:!0})).then((function(){n(),s("Has ascendido al miembro ".concat(re(e.user)),{appearance:"success",autoDismiss:!0})}))}),[s,n]),i=Object(r.useCallback)((function(e){var t;(t=e.id,O.a.post("".concat(p,"/").concat(t,"/demote"),{},{withCredentials:!0})).then((function(){n(),s("Has degradado al miembro ".concat(re(e.user)),{appearance:"success",autoDismiss:!0})}))}),[s,n]),u=Object(r.useCallback)((function(e){var t;window.confirm("\xbfEst\xe1 seguro de que quiere expulsar a este miembro? Se borrar\xe1n todos los eventos e informaci\xf3n almacenada.")&&(t=e.id,O.a.post("".concat(p,"/").concat(t,"/kick"),{},{withCredentials:!0})).then((function(){n(),s("Has expulsado al miembro ".concat(re(e.user)),{appearance:"success",autoDismiss:!0})}))}),[s,n]);Object(r.useEffect)((function(){n()}),[s,t,n]);var j=Object(r.useMemo)((function(){return a?a.map((function(e){return{id:e.id,firstName:e.user.firstName,lastName:e.user.lastName,role:e.role,status:e.status,joinDate:(t=e.createdAt,$()(t).format("DD/MM/YYYY")),emailAddress:e.user.emailAddress,actions:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Ee.a,{ml:1,size:"xs",variant:"outline",colorScheme:"blue","aria-label":"Search database",disabled:"admin"===e.role,icon:"employee"===e.role?Object(w.jsx)(gt.a,{}):Object(w.jsx)(vt.a,{}),onClick:function(){return"employee"===e.role?o(e):i(e)}}),Object(w.jsx)(Ee.a,{ml:1,size:"xs",variant:"outline",colorScheme:"blue","aria-label":"Search database",disabled:"admin"===e.role,icon:Object(w.jsx)(Rt.a,{}),onClick:function(){return u(e)}})]})};var t})):[]}),[i,u,a,o]);return Object(w.jsxs)(l.a,{p:4,flex:1,rounded:"md",direction:"column",bg:c,children:[Object(w.jsx)(oe.a,{as:"h2",size:"md",children:"Miembros del proyecto"}),Object(w.jsx)(pt.a,{my:2}),Object(w.jsx)(B.a,{flex:1,children:Object(w.jsx)(ot.a,{children:function(e){var t=e.width,a=e.height;return Object(w.jsxs)(ot.c,{fixed:t<700,width:t,height:a,data:j,headerHeight:30,children:[Object(w.jsx)(ot.b,{dataKey:"id",title:"Id",resizable:!0,width:50},"keyId"),Object(w.jsx)(ot.b,{dataKey:"firstName",title:"Nombre",resizable:!0,width:80},"keyFirstName"),Object(w.jsx)(ot.b,{dataKey:"lastName",title:"Apellidos",resizable:!0,width:120},"keyLastName"),Object(w.jsx)(ot.b,{dataKey:"role",title:"Rol",resizable:!0,width:100},"keyRole"),Object(w.jsx)(ot.b,{dataKey:"status",title:"Estado",resizable:!0,width:75},"keyStatus"),Object(w.jsx)(ot.b,{dataKey:"joinDate",title:"Fecha entrada",resizable:!0,width:120},"keyDate"),Object(w.jsx)(ot.b,{dataKey:"emailAddress",title:"Correo",resizable:!0,width:275},"keyEmailAddress"),Object(w.jsx)(ot.b,{dataKey:"actions",title:"Acciones",resizable:!0,width:120},"keyActions")]})}})})]})},yt=pe.a().shape({emailAddress:pe.b().email().required()});var Ct=function(e){var t=e.projectInfo,a=e.updateMembers,r=Object(F.b)({resolver:Object(xe.a)(yt)}),n=r.handleSubmit,c=r.reset,s=r.errors,o=r.register,i=r.formState,u=Object(X.d)("white","gray.600"),l=Object(X.d)("gray.100","gray.700"),j=Object(d.useToasts)().addToast;function b(){return(b=Object(H.a)(K.a.mark((function e(r){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.emailAddress,e.prev=1,e.next=4,v(t.id,n);case 4:j('Has enviado una invitaci\xf3n a "'.concat(n,'"'),{appearance:"success",autoDismiss:!0}),c(),a(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),ce(e.t0,ge.ACCOUNT_NOT_FOUND_ERROR)?j("No existe ning\xfan usuario con ese correo electr\xf3nico",{appearance:"error",autoDismiss:!0}):ce(e.t0,ge.ALREADY_PROJECT_MEMBER_ERROR)?j("Este usuario ya es un miembro del proyecto",{appearance:"error",autoDismiss:!0}):j("Ha ocurrido un error desconocido: ".concat(e.t0),{appearance:"error",autoDismiss:!0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(w.jsxs)(B.a,{p:4,mt:12,bg:l,rounded:"md",children:[Object(w.jsx)(oe.a,{as:"h2",size:"md",children:"Invitar a usuario"}),Object(w.jsx)(pt.a,{my:2}),Object(w.jsx)(Y.a,{mt:4,children:"Invita a un usuario para monitorizar su trabajo. Podr\xe1s cambiar su rol en la lista de miembros. Aparecer\xe1 como un miembro cuando acepte la invitaci\xf3n."}),Object(w.jsx)("form",{onSubmit:n((function(e){return b.apply(this,arguments)})),children:Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!s.emailAddress,children:[Object(w.jsxs)(me.a,{mt:4,children:[Object(w.jsx)(je.a,{width:"auto",flexGrow:"1",name:"emailAddress",type:"text",placeholder:"Correo electr\xf3nico",ref:o,errorBorderColor:"red.500",bg:u}),Object(w.jsx)(W.a,{ml:6,colorScheme:"blue",isLoading:i.isSubmitting,type:"submit",children:"Invitar usuario"})]}),Object(w.jsx)(be.a,{children:s.emailAddress&&s.emailAddress.message})]})})]})};var _t=function(e){var t=e.projectInfo,a=Object(r.useState)(""),n=Object(b.a)(a,2),c=n[0],s=n[1],o=Object(X.d)("white","gray.600"),u=Object(X.d)("gray.100","gray.700"),l=Object(d.useToasts)().addToast,j=Object(i.g)(),m=Object(r.useCallback)((function(){var e;(e=t.id,O.a.delete("".concat(f,"/").concat(e),{withCredentials:!0})).then((function(e){j.push("/"),l('Has borrado el proyecto "'.concat(t.name,'"'),{appearance:"success",autoDismiss:!0})})).catch((function(e){l("Ha ocurrido un error desconocido: ".concat(e),{appearance:"error",autoDismiss:!0})}))}),[t,j,l]);return Object(w.jsxs)(B.a,{p:4,mt:12,bg:u,rounded:"md",children:[Object(w.jsx)(oe.a,{as:"h2",size:"md",children:"Borrar proyecto"}),Object(w.jsx)(pt.a,{my:2}),Object(w.jsx)(Y.a,{mt:4,children:"Confirma que quieres borrar este proyecto escribiendo su nombre debajo. Una vez borres el proyecto, se borrar\xe1n todas las sesiones, eventos de aplicaci\xf3n y notas relacionados permanentemente."}),Object(w.jsxs)(me.a,{mt:4,children:[Object(w.jsx)(je.a,{width:"auto",flexGrow:"1",name:"projectName",type:"text",placeholder:"Nombre de proyecto",value:c,onChange:function(e){return s(e.target.value)},bg:o}),Object(w.jsx)(W.a,{ml:6,colorScheme:"red",disabled:c!==t.name,onClick:m,children:"Borrar proyecto"})]})]})};function St(e){var t=e.projectInfo,a=e.setProjectInfo,n=Object(r.useState)(),c=Object(b.a)(n,2),s=c[0],o=c[1],u=Object(d.useToasts)().addToast,j=Object(i.g)();Object(r.useEffect)((function(){ee(t.projectMember)||j.replace("/project/".concat(t.id))}),[j,t]);var m=Object(r.useCallback)((function(){R(t.id).then((function(e){o(e.data)})).catch((function(e){u("Ha ocurrido un error desconocido: ".concat(e),{appearance:"error",autoDismiss:!0})}))}),[u,t]);return Object(w.jsxs)(l.a,{direction:"column",py:10,mx:8,children:[Object(w.jsx)(l.a,{mb:12,children:Object(w.jsx)(W.a,{leftIcon:Object(w.jsx)(Ye.a,{}),colorScheme:"gray",variant:"ghost",whiteSpace:"pre",onClick:function(){return j.push("/project/".concat(t.id))},children:t.name||"Proyecto sin nombre"})}),Object(w.jsxs)(l.a,{direction:{base:"column",lg:"row"},children:[Object(w.jsx)(l.a,{width:{base:"100%",lg:"60%"},height:{base:"30rem",lg:"auto"},mx:{base:0,lg:8},direction:"column",children:Object(w.jsx)(Et,{projectInfo:t,projectMembers:s,updateMembers:m})}),Object(w.jsxs)(l.a,{width:{base:"100%",lg:"40%"},mx:{base:0,lg:8},direction:"column",children:[Object(w.jsx)(ft,{projectInfo:t,setProjectInfo:a}),Object(w.jsx)(Ct,{projectInfo:t,updateMembers:m}),Object(w.jsx)(_t,{projectInfo:t})]})]})]})}var It=function(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],n=t[1],c=Object(i.i)().projectId,s=Object(d.useToasts)().addToast,o=Object(i.g)();return he(ne("Ajustes de proyecto")),Object(r.useEffect)((function(){E(c).then((function(e){n(e.data)})).catch((function(e){ce(e,ge.RESOURCE_NOT_FOUND_ERROR)?(s("No se ha podido encontrar la sesi\xf3n que has pedido",{appearance:"error",autoDismiss:!0}),o.push("/")):s("Ha ocurrido un error desconocido: ".concat(e),{appearance:"error",autoDismiss:!0})}))}),[o,s,c]),Object(w.jsx)(Ne,{children:a?Object(w.jsx)(St,{projectInfo:a,setProjectInfo:n}):Object(w.jsx)(Ae,{message:"Cargando el proyecto actual"})})};function wt(){return{width:window.innerWidth,height:window.innerHeight}}function Nt(e){var t=e.projectInfo,a=e.sessionInfo,n=Object(i.g)(),c=Object(r.useState)([]),s=Object(b.a)(c,2),o=s[0],d=s[1],u=function(){var e=Object(r.useState)(wt()),t=Object(b.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){function e(){n(wt())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}(),j=u.height;Object(r.useEffect)((function(){var e;(e=a.id,O.a.get("".concat("https://timeit.jamezrin.name/api/data_query/session_events","/").concat(e),{withCredentials:!0})).then((function(e){d(e.data)}))}),[a]);var m=Object(dt.a)(),h=m.ref,p=m.width,x=void 0===p?0:p,f=Object(r.useMemo)((function(){return o?o.map((function(e){return"app_event"===e.type?{id:e.id,keyType:"App",keyTimes:e.data.eventCount,keyDate:te(e.createdAt),keyContent:"".concat(e.data.windowName," (").concat(e.data.windowClass," ").concat(e.data.windowPid,")")}:"note"===e.type?{id:e.id,keyType:"Nota",keyTimes:1,keyDate:te(e.createdAt),keyContent:e.data.text}:null})):[]}),[o]);return Object(w.jsxs)(l.a,{direction:"column",py:10,mx:8,children:[Object(w.jsx)(l.a,{mb:12,children:Object(w.jsx)(W.a,{leftIcon:Object(w.jsx)(Ye.a,{}),colorScheme:"gray",variant:"ghost",size:"lg",whiteSpace:"pre",onClick:function(){return n.push("/project/".concat(t.id))},children:t.name||"Proyecto sin nombre"})}),Object(w.jsxs)(B.a,{ref:h,flexGrow:"1",mx:{base:0,lg:8},children:[Object(w.jsx)(oe.a,{as:"h2",size:"lg",mb:3,children:"Lista de eventos"}),Object(w.jsxs)(ot.c,{data:f,height:j-300,width:x,children:[Object(w.jsx)(ot.b,{dataKey:"keyType",title:"Tipo de evento",resizable:!0,width:80},"keyType"),Object(w.jsx)(ot.b,{dataKey:"keyDate",title:"Fecha de creaci\xf3n",resizable:!0,width:200},"keyDate"),Object(w.jsx)(ot.b,{dataKey:"keyTimes",title:"Ocurrencias",resizable:!0,width:100},"keyTimes"),Object(w.jsx)(ot.b,{dataKey:"keyContent",title:"Contenido",resizable:!1,width:x-380},"keyContent")]})]})]})}var Dt=function(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(null),s=Object(b.a)(c,2),o=s[0],u=s[1],l=Object(i.i)(),j=l.projectId,m=l.sessionId,O=Object(d.useToasts)().addToast,h=Object(i.g)();return he(ne("Lista de eventos")),Object(r.useEffect)((function(){Promise.all([E(j).then((function(e){n(e.data)})),y(m).then((function(e){u(e.data)}))]).catch((function(e){ce(e,ge.RESOURCE_NOT_FOUND_ERROR)?(O("No se ha podido encontrar la sesi\xf3n que has pedido",{appearance:"error",autoDismiss:!0}),h.push("/")):O("Ha ocurrido un error desconocido: ".concat(e),{appearance:"error",autoDismiss:!0})}))}),[h,O,j,m]),Object(w.jsx)(Ne,{children:a&&o?Object(w.jsx)(Nt,{projectInfo:a,sessionInfo:o}):Object(w.jsx)(Ae,{message:"Cargando la sesi\xf3n seleccionada"})})},At=pe.a().shape({emailAddress:pe.b().email().required()});function Tt(){var e=Object(F.b)({resolver:Object(xe.a)(At)}),t=e.handleSubmit,a=e.errors,r=e.register,n=e.formState,c=Object(X.d)("white","gray.600"),s=Object(d.useToasts)().addToast,u=Object(i.h)(),l=Object(i.g)();function j(){return(j=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t);case 3:s("Te acabamos de enviar un correo electr\xf3nico para que puedas recuperar tu contrase\xf1a",{appearance:"success",autoDismiss:!0}),l.replace(u.state&&u.state.previousLocation||"/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ce(e.t0,ge.INACTIVE_ACCOUNT_ERROR)?s("Todav\xeda no has confirmado tu cuenta de usuario, comprueba tu correo electr\xf3nico",{appearance:"error",autoDismiss:!0}):ce(e.t0,ge.ACCOUNT_NOT_FOUND_ERROR)?s("No existe ning\xfan usuario con ese correo electr\xf3nico",{appearance:"error",autoDismiss:!0}):ce(e.t0,ge.ALREADY_REQUESTED_MAIL_TOKEN_ERROR)?s("Solo puedes pedir restablecer la contrase\xf1a de tu cuenta cada 12 horas",{appearance:"error",autoDismiss:!0}):s("Ha ocurrido un error desconocido: ".concat(e.t0),{appearance:"error",autoDismiss:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return he(ne("Restablecimiento de contrase\xf1a")),Object(w.jsxs)(se,{children:[Object(w.jsx)(oe.a,{as:"h1",children:"Recupera tu contrase\xf1a"}),Object(w.jsx)(ie.a,{mt:4,children:Object(w.jsxs)(ie.b,{children:["Si no tienes una cuenta,\xa0",Object(w.jsx)(de.a,{as:o.b,to:"/register",color:"blue.500",children:"crea una nueva cuenta"})]})}),Object(w.jsx)(Y.a,{mt:4,children:"Al realizar esta operaci\xf3n te enviaremos un correo electr\xf3nico con un enlace para restablecer tu contrase\xf1a"}),Object(w.jsxs)("form",{onSubmit:t((function(e){return j.apply(this,arguments)})),children:[Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.emailAddress,children:[Object(w.jsx)(le.a,{htmlFor:"emailAddress",children:"Correo electr\xf3nico"}),Object(w.jsx)(je.a,{name:"emailAddress",id:"emailAddress",type:"email",placeholder:"usuario@ejemplo.org",ref:r,errorBorderColor:"red.500",bg:c}),Object(w.jsx)(be.a,{children:a.emailAddress&&a.emailAddress.message})]}),Object(w.jsxs)(W.a,{mt:4,colorScheme:"blue",isLoading:n.isSubmitting,type:"submit",children:["Continuar ",Object(w.jsx)(fe.a,{ml:4})]})]})]})}function kt(){var e=Object(i.i)().token,t=Object(i.g)(),a=Object(d.useToasts)().addToast;return he(ne("Confirmaci\xf3n de cuenta")),Object(r.useEffect)((function(){(function(e){return O.a.post("".concat("https://timeit.jamezrin.name/api/confirm-account","/").concat(e),{},{withCredentials:!0})})(e).then((function(e){t.push("/"),a("Has confirmado tu cuenta, ya puedes iniciar sesi\xf3n",{appearance:"success",autoDismiss:!0})})).catch((function(e){ce(e,ge.INVALID_CREDENTIALS_ERROR)?a("Las credenciales introducidas no son v\xe1lidas",{appearance:"error",autoDismiss:!0}):ce(e,ge.INACTIVE_ACCOUNT_ERROR)?a("Todav\xeda no has confirmado tu cuenta de usuario, comprueba tu correo electr\xf3nico",{appearance:"error",autoDismiss:!0}):ce(e,ge.EXPIRED_MAIL_TOKEN_ERROR)?(a("El enlace que has usado ha caducado, solicita uno nuevo",{appearance:"error",autoDismiss:!0}),t.push("/")):a("Ha ocurrido un error desconocido: ".concat(e),{appearance:"error",autoDismiss:!0})}))}),[a,e,t]),Object(w.jsx)(l.a,{height:"100vh",width:"100vw",justifyContent:"center",alignItems:"center",children:Object(w.jsx)(Ae,{message:"Confirmando tu cuenta..."})})}function Mt(){var e=Object(i.i)(),t=e.projectId,a=e.token,n=Object(i.g)(),c=Object(d.useToasts)().addToast;return he(ne("Invitaci\xf3n a proyecto")),Object(r.useEffect)((function(){(function(e,t){return O.a.post("".concat(f,"/").concat(e,"/accept-invite/").concat(t),{},{withCredentials:!0})})(t,a).then((function(e){n.push("/projects/".concat(t)),c("Has aceptado la invitaci\xf3n de proyecto",{appearance:"success",autoDismiss:!0})})).catch((function(e){ce(e,ge.INVALID_CREDENTIALS_ERROR)?c("Las credenciales introducidas no son v\xe1lidas",{appearance:"error",autoDismiss:!0}):ce(e,ge.INACTIVE_ACCOUNT_ERROR)?c("Todav\xeda no has confirmado tu cuenta de usuario, comprueba tu correo electr\xf3nico",{appearance:"error",autoDismiss:!0}):ce(e,ge.EXPIRED_MAIL_TOKEN_ERROR)?(c("El enlace que has usado ha caducado, solicita uno nuevo",{appearance:"error",autoDismiss:!0}),n.push("/")):c("Ha ocurrido un error desconocido: ".concat(e),{appearance:"error",autoDismiss:!0})}))}),[n,c,t,a]),Object(w.jsx)(l.a,{height:"100vh",width:"100vw",justifyContent:"center",alignItems:"center",children:Object(w.jsx)(Ae,{message:"Aceptando la invitaci\xf3n..."})})}var Lt=pe.a().shape({newPassword:pe.b().required().trim().min(8)});function zt(){var e=Object(F.b)({resolver:Object(xe.a)(Lt)}),t=e.handleSubmit,a=e.errors,n=e.register,c=e.formState,s=Object(r.useState)(!1),o=Object(b.a)(s,2),u=o[0],l=o[1],j=Object(d.useToasts)().addToast,m=Object(i.g)(),O=Object(i.i)().token,h=Object(X.d)("white","gray.600");function p(){return(p=Object(H.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t,O);case 3:j("Has cambiado tu contrase\xf1a correctamente, ya puedes iniciar sesi\xf3n con ella",{appearance:"success",autoDismiss:!0}),m.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ce(e.t0,ge.INVALID_CREDENTIALS_ERROR)?j("Las credenciales introducidas no son v\xe1lidas",{appearance:"error",autoDismiss:!0}):ce(e.t0,ge.INACTIVE_ACCOUNT_ERROR)?j("Todav\xeda no has confirmado tu cuenta de usuario, comprueba tu correo electr\xf3nico",{appearance:"error",autoDismiss:!0}):ce(e.t0,ge.EXPIRED_MAIL_TOKEN_ERROR)?(j("El enlace que has usado ha caducado, solicita uno nuevo",{appearance:"error",autoDismiss:!0}),m.push("/")):j("Ha ocurrido un error desconocido: ".concat(e.t0),{appearance:"error",autoDismiss:!0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return he(ne("Restablecimiento de contrase\xf1a")),Object(w.jsxs)(se,{children:[Object(w.jsx)(oe.a,{as:"h1",children:"Establece tu nueva contrase\xf1a"}),Object(w.jsx)(Y.a,{mt:4,children:"Al realizar esta operaci\xf3n actualizaremos la contrase\xf1a de tu cuenta. Seguir\xe1s teniendo la sesi\xf3n iniciada en cualquier navegador o aplicaci\xf3n."}),Object(w.jsxs)("form",{onSubmit:t((function(e){return p.apply(this,arguments)})),children:[Object(w.jsxs)(ue.a,{mt:4,isInvalid:!!a.newPassword,children:[Object(w.jsx)(le.a,{htmlFor:"newPassword",children:"Nueva contrase\xf1a"}),Object(w.jsxs)(me.a,{size:"md",children:[Object(w.jsx)(je.a,{name:"newPassword",id:"newPassword",type:u?"text":"password",placeholder:"$tr0ng p@ssw0rd",ref:n,errorBorderColor:"red.500",bg:h}),Object(w.jsx)(Oe.a,{width:"6.5rem",mr:{base:4,lg:12},children:Object(w.jsx)(W.a,{h:"1.75rem",size:"sm",onClick:function(){return l(!u)},children:u?"Ocultar":"Mostrar"})})]}),Object(w.jsx)(be.a,{children:a.newPassword&&a.newPassword.message})]}),Object(w.jsxs)(W.a,{mt:4,colorScheme:"blue",isLoading:c.isSubmitting,type:"submit",children:["Continuar ",Object(w.jsx)(fe.a,{ml:4})]})]})]})}var Ut=function(e){var t=e.children;return Object(w.jsx)(u.a,{children:Object(w.jsx)(d.ToastProvider,{children:Object(w.jsx)(A,{children:t})})})},Vt=function(){var e=Object(r.useContext)(T).authStatus;return e?Object(w.jsx)(o.a,{children:Object(w.jsxs)(i.d,{children:[Object(w.jsx)(i.b,{exact:!0,path:"/",children:e.isAuthenticated?Object(w.jsx)(Fe,{}):Object(w.jsx)(i.a,{to:"/login"})}),Object(w.jsx)(V,{path:"/login",component:Re}),Object(w.jsx)(V,{path:"/register",component:qe}),Object(w.jsx)(V,{path:"/recover_password",component:Tt}),Object(w.jsx)(z,{path:"/project/:projectId",component:ht,exact:!0}),Object(w.jsx)(z,{path:"/project/:projectId/settings",component:It,exact:!0}),Object(w.jsx)(z,{path:"/project/:projectId/session/:sessionId",component:Dt,exact:!0}),Object(w.jsx)(z,{path:"/project/:projectId/accept-invite/:token",component:Mt,exact:!0}),Object(w.jsx)(i.b,{path:"/confirm-account/:token",component:kt,exact:!0}),Object(w.jsx)(i.b,{path:"/recover-password/:token",component:zt,exact:!0}),Object(w.jsx)(i.b,{children:Object(w.jsx)(i.a,{to:"/"})})]})}):Object(w.jsx)(l.a,{height:"100vh",width:"100vw",justifyContent:"center",alignItems:"center",children:Object(w.jsx)(Ae,{})})};var Pt=function(){return Object(w.jsxs)(Ut,{children:[Object(w.jsx)(j.a,{initialColorMode:"light"}),Object(w.jsx)(Vt,{})]})};s.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(Pt,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[756,1,2]]]);